<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="../css/jquery-accordion-menu.css" rel="stylesheet" type="text/css" />
    <link href="../css/font-awesome.css" rel="stylesheet" type="text/css" />
    
    <!-- Icons -->
    <link href="../assets/css/icons.css" rel="stylesheet" />
    <link href="../assets/css/bootstrap.css" rel="stylesheet" />
    <link href="../assets/css/main.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/css/plugins.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <link rel="stylesheet" href="../css/iconfont1.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/food.css">
    <title>菜品管理</title>
</head>
<body>
    <!-- header -->
    <!--#include virtual="html/header.html"-->
    <!-- 侧边栏 -->
    <!--#include virtual="html/asside.html"-->
    <div id="diy-right">
        <div class="container-fluid">
            <div class="row">
                <button class="btn btn-primary" data-toggle="modal" data-target="#addtype">添加分类</button>
                <button class="btn btn-primary" id="addcai">添加菜品</button>
            </div>
        </div>
        <!--添加分类 模态框 -->
        <div class="modal fade" id="addtype" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                            <span>&times;</span>
                        </button>
                        <h4 class="modal-title">添加新的分类</h4>
                        <!--弹出框标题-->
                    </div>
                    <!--弹出框内部头部-->
                    <div class="modal-body">
                        <div class=" form-group">
                            <p style="color:brown">星号项为必填项</p>
                            <label><span style="color:brown">*</span>分类名称</label>
                            <input id="styleName" type="text" placeholder="请输入20字以内的分类内容" class="form-control" maxlength="20">
                        </div>
                        <div class=" form-group">
                            <label>描述</label>
                            <input id="styleDes" type="text" placeholder="请输入50字以内的分类描述（非必填）" class="form-control" maxlength="50">
                        </div>
                    </div>
                    <!--弹出框身体-->
                    <div class="modal-footer">
                        <button id="styleSave" class="btn btn-success">保存</button>
                    </div>
                    <!-- 警告框 -->
                    
                </div>
                <!--弹出框内容-->
            </div>
            <!--弹出框-->
            
        </div>
        <!--遮罩层-->
            <!-- 添加菜品 -->
        <form id="formData" name="formData" action="">
            <div id="addcaiinfo" class="fade">
                <!-- 菜品名称、分类 -->
                <div class="cai">
                    <div class="cainame">
                        <p style="color:brown">星号项为必填项</p>
                        <label for="caiName"><span style="color:brown">*</span>菜品名称</label>
                        <br>
                        <input type="text" id="caiName" name="caiName" placeholder="请输入20字以内的菜品名称" maxlength="20">
                    </div>
                    <div class="caistyle">
                        <label for="caistyle"><span style="color:brown">*</span>菜品所属分类</label>
                        <br>
                        <select name="caiStyle" id="caiStyle">
                            <option value="999">选择类型</option>
                        </select>
                    </div>
                    <div class="caidis">
                        <label for="caidis">菜品描述</label>
                        <br>
                        <input type="text" id="caiDes" name="caiDes" placeholder="请输入50字以内的菜品描述" maxlength="50">
                    </div>
                </div>
                <!-- 价格、数量 -->
                <div class="sum">
                    <div class="caiPrice">
                        <label for="price"><span style="color:brown">*</span>单价</label>
                        <div class="input-group" id="price">
                            <span class="input-group-addon" id="sizing-addon2">￥</span>
                            <input id="caiPrice" name="caiPrice" type="text" class="form-control" placeholder="0.00" aria-describedby="sizing-addon2">
                        </div>
                    </div>
                    <div class="price hezi">
                        <label for="hePrice"><span style="color:brown">*</span>餐盒费</label>
                        <div class="input-group" id="heziprice">
                            <span class="input-group-addon" id="sizing-addon2">￥</span>
                            <input id="hePrice" name="hePrice" type="text" class="form-control" placeholder="0.00" aria-describedby="sizing-addon2">
                        </div>
                    </div>
                    <div class="num">
                        <label for="num"><span style="color:brown">*</span>库存（当前/最大）</label>
                        <br>
                        <input id="dang" name="dang" class="dang" type="text" placeholder="10000">
                        <span class="fg">/</span>
                        <input id="max" class="max" name="da" type="text" placeholder="10000" />
                    </div>
                </div>
                <!-- 餐品图片 -->
                <div class="img">
                    <label><span style="color:brown">*</span>图片</label>
                    <div id="upimg" class="upimg">
                        <i id="iconfont" class="iconfont icon-jiahao"></i>
                        <img src="" alt="" id="imgContent" >
                        <input type="file" id="imgFile" name="imgFile">
                        
                    </div>
                </div>
                <div class="up">
                    <button type="button" class="btn btn-primary" id="saveCai">保存</button>
                    <button type="button" class="btn btn-default" id="cancel">取消</button>
                </div>
            </div>
        </form>
    </div>
</body>
<script src="../js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="../js/jquery-accordion-menu.js" type="text/javascript"></script>
<script src="../js/bootstrap.js"></script>
<script src="../../common/js/addevent.js"></script>
<script src="../../common/js/ajax.js"></script>
<!-- 退出 -->
<script src="../js/safeout.js"></script>
<!-- 请求用户名 -->
<script src="../js/buscommon.js"></script>
<!-- 上传 -->
<script src="../js/upload.js"></script>
<script type="text/javascript">

    $(function () {
        //顶部导航切换
        $("#demo-list li").click(function () {
            $("#demo-list li.active").removeClass("active")
            $(this).addClass("active");
        });
       $("#addcai").click(function(){
           $("#addcaiinfo").css("opacity","1");
       });
       $("#cancel").click(function(){
           $("#addcaiinfo").css("opacity","0");
       });
    //    添加菜品、图片
        var fileM = document.getElementById("imgFile");
        var upImg=document.getElementById("upimg");
        var icon=document.getElementById("iconfont");
        var saveCai=document.getElementById("saveCai");
        $("#imgFile").on("change", function () {
            icon.style.display="none";
            $("#imgContent").attr("src", URL.createObjectURL($(this)[0].files[0]));
        });
        addEvent(saveCai,"click",()=>{
            if($("#caiName").val()!="" && $("#caiStyle").val()!="999" && $("#caiPrice").val()!="" && $("#hePrice").val()!="" && $("hePrice").val()!="" && $("#dang").val()!="" && $("max").val()!=""){
                var data = new FormData($('#formData')[0]);
                console.log(data == undefined)
                $.ajax({
                    url: '../php/uploadcai.php',
                    type: "POST",
                    data: data,
                    dataType: "JSON",
                    cache: "false",
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        console.log(data)
                    }
                });
            }else{
                alert("请将带有星号的项填写完整！")
            }
                
                
        })
    });
    	
</script>

</html>